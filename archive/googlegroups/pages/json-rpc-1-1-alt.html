<h1>JSON-RPC 1.1 Alt</h1>

suggestion for a simple JSON-RPC 1.1<div><h1>suggestion for a simple JSON-RPC 1.1</h1><table><col><col><tbody valign="top"><tr><th>Date:</th><td>2007-05-06</td></tr><tr><th>Web site:</th><td><a href="http://89.106.94.126/jsonrpc/">http://89.106.94.126/jsonrpc/</a></td></tr><tr><th>Author:</th><td>Roland Koebler (r.koebler <em>at</em> yahoo dot de)</td></tr></tbody></table><div><p><a name="table-of-contents"><strong>Table of Contents</strong></a></p><ul><li><a href="#introduction" name="id5">1&nbsp;&nbsp;&nbsp;Introduction</a><ul><li><a href="#thoughts-about-rpc" name="id6">1.1&nbsp;&nbsp;&nbsp;Thoughts about RPC</a></li><li><a href="#structure-of-this-document" name="id7">1.2&nbsp;&nbsp;&nbsp;Structure of this Document</a></li><li><a href="#todo" name="id8">1.3&nbsp;&nbsp;&nbsp;TODO</a></li></ul></li><li><a href="#differences" name="id9">2&nbsp;&nbsp;&nbsp;Differences</a><ul><li><a href="#differences-from-version-1" name="id10">2.1&nbsp;&nbsp;&nbsp;Differences from Version 1</a></li><li><a href="#differences-from-1-1wd" name="id11">2.2&nbsp;&nbsp;&nbsp;Differences from 1.1WD</a></li></ul></li><li><a href="#requirements" name="id12">3&nbsp;&nbsp;&nbsp;Requirements</a></li><li><a href="#terminology" name="id13">4&nbsp;&nbsp;&nbsp;Terminology</a></li><li><a href="#type-system" name="id14">5&nbsp;&nbsp;&nbsp;Type system</a></li><li><a href="#procedure-call-request" name="id15">6&nbsp;&nbsp;&nbsp;Procedure Call (Request)</a><ul><li><a href="#named-and-positional-parameters" name="id16">6.1&nbsp;&nbsp;&nbsp;Named and Positional Parameters</a><ul><li><a href="#choosing-between-named-and-positional-parameters" name="id17">6.1.1&nbsp;&nbsp;&nbsp;Choosing between Named and Positional Parameters</a></li></ul></li><li><a href="#call-examples" name="id18">6.2&nbsp;&nbsp;&nbsp;Call examples</a><ul><li><a href="#procedure-call-with-named-parameters" name="id19">6.2.1&nbsp;&nbsp;&nbsp;Procedure Call with Named Parameters</a></li><li><a href="#procedure-call-with-positional-parameters" name="id20">6.2.2&nbsp;&nbsp;&nbsp;Procedure Call with Positional Parameters</a></li><li><a href="#procedure-call-with-mixed-parameters" name="id21">6.2.3&nbsp;&nbsp;&nbsp;Procedure Call With Mixed Parameters</a></li></ul></li></ul></li><li><a href="#procedure-return-response" name="id22">7&nbsp;&nbsp;&nbsp;Procedure Return (Response)</a><ul><li><a href="#error-object" name="id23">7.1&nbsp;&nbsp;&nbsp;Error Object</a></li><li><a href="#response-examples" name="id24">7.2&nbsp;&nbsp;&nbsp;Response Examples</a></li></ul></li><li><a href="#system-services" name="id25">8&nbsp;&nbsp;&nbsp;System Services</a><ul><li><a href="#parameter-and-return-type-strings" name="id26">8.1&nbsp;&nbsp;&nbsp;Parameter and Return Type Strings</a></li></ul></li><li><a href="#service-procedure-and-parameter-names" name="id27">9&nbsp;&nbsp;&nbsp;Service, Procedure and Parameter Names</a></li><li><a href="#extensions" name="id28">10&nbsp;&nbsp;&nbsp;Extensions</a><ul><li><a href="#multicall" name="id29">10.1&nbsp;&nbsp;&nbsp;Multicall</a></li></ul></li><li><a href="#appendix-a-transports" name="id30">11&nbsp;&nbsp;&nbsp;APPENDIX A: Transports</a><ul><li><a href="#unix-domain-sockets" name="id31">11.1&nbsp;&nbsp;&nbsp;Unix Domain Sockets</a></li><li><a href="#tcp-ip-sockets" name="id32">11.2&nbsp;&nbsp;&nbsp;TCP/IP Sockets</a></li><li><a href="#http" name="id33">11.3&nbsp;&nbsp;&nbsp;HTTP</a><ul><li><a href="#http-post-procedure-call" name="id34">11.3.1&nbsp;&nbsp;&nbsp;HTTP POST Procedure Call</a></li><li><a href="#http-get-procedure-call" name="id35">11.3.2&nbsp;&nbsp;&nbsp;HTTP GET Procedure Call</a></li><li><a href="#http-procedure-return" name="id36">11.3.3&nbsp;&nbsp;&nbsp;HTTP Procedure Return</a></li></ul></li></ul></li></ul></div><div><h1><a name="introduction">1&nbsp;&nbsp;&nbsp;Introduction</a></h1><blockquote>
"<em>JSON-RPC is a lightweight remote procedure call protocol.
It's designed to be simple!</em>" [<a href="http://json-rpc.org/wiki/specification">http://json-rpc.org/wiki/specification</a>]</blockquote><p>That's good.</p><p>But unfortunately, some useful things are missing in <a href="http://json-rpc.org/wiki/specification">JSON-RPC 1.0</a>,
especially named parameters and maybe some definitions about error-messages.
The <a href="http://json-rpc.org/wd/JSON-RPC-1-1-WD-20060807.html">JSON-RPC 1.1 Working Draft</a> on the other side somehow overshoots the
mark and makes things <strong>much</strong> more complicated.
This already led to several discussions on the <a href="http://groups.yahoo.com/group/json-rpc/">JSON-RPC Yahoo! Group</a>.</p><p>The goal of this document is to propose a JSON-RPC-specification which
enhances JSON-RPC 1.0, adds reasonable features from the 1.1WD, but still
stays simple. This currently is only a working draft.</p><div><h2><a name="thoughts-about-rpc">1.1&nbsp;&nbsp;&nbsp;Thoughts about RPC</a></h2><p>In my option, RPC consists of several <em>independent</em> parts:</p><ol><li>data structure (how requests/responses/errors look like)</li><li>serializer (i.e. JSON, XML, URI, ...)</li><li>transport (i.e. unix domain socket, tcp/ip, http)</li><li>proxy/dispatcher</li></ol><p>Unfortunately, these parts are often not treated as independent, which
results in unnecessary complex results <a href="#id3" name="id1">[1]</a>. A RPC-specification should
only define point 1 ("data structure"), and tell the user which
serialization to use <a href="#id4" name="id2">[2]</a>.</p><table><colgroup><col><col></colgroup><tbody valign="top"><tr><td><a href="#id1" name="id3">[1]</a></td><td>(Have you ever tried to run i.e. XML-RPC over unix domain sockets?
this does not work, because XML-RPC always uses http, although this
would not be necessary.)</td></tr></tbody></table><table><colgroup><col><col></colgroup><tbody valign="top"><tr><td><a href="#id2" name="id4">[2]</a></td><td>Although requiring a specific serialization would not be absolutely
necessary: It would also be possible to serialize XML-RPC-data-structures
in JSON, or JSON-RPC-data-structures in XML. But I don't think that
things like this are really used.</td></tr></tbody></table></div><div><h2><a name="structure-of-this-document">1.2&nbsp;&nbsp;&nbsp;Structure of this Document</a></h2><p>The following sections mostly use the same headlines (and often same
numbers) as the 1.1WD, if possible.</p></div><div><h2><a name="todo">1.3&nbsp;&nbsp;&nbsp;TODO</a></h2><ul><li>should a note on an optimal "Member Sequence" and the possible
optimization be added?</li><li>should something like class-hinting (like in <a href="http://json-rpc.org/wiki/specification">JSON-RPC 1.0</a>),
or references (for cyclic objects etc.) be defined?</li><li>error-messages: timeout!</li><li>should Object extensions (like in <cite>1.1WD Object Extensions</cite>) be defined?</li><li>...</li></ul><p>see also the may <tt><span>TODO</span></tt> tags all over this document.</p></div></div><div><h1><a name="differences">2&nbsp;&nbsp;&nbsp;Differences</a></h1><div><h2><a name="differences-from-version-1">2.1&nbsp;&nbsp;&nbsp;Differences from Version 1</a></h2><p>The most important differences are:</p><ul><li>named parameters added (like in 1.1WD)</li><li>"version" added (like in 1.1WD)</li><li>"id" now optional (like in 1.1WD)</li><li>"kwparams" added</li><li>notifications removed (like in 1.1WD)</li><li>added error object</li><li>added system services</li></ul></div><div><h2><a name="differences-from-1-1wd">2.2&nbsp;&nbsp;&nbsp;Differences from 1.1WD</a></h2><p>The most important differences are:</p><ul><li><p><strong>Transport</strong>:</p><p>1.1WD requires HTTP.</p><p>This specification does not rely on any specific transport, so you
can use i.e. unix domain sockets, tcp/ip, http, or even letters or
<a href="http://en.wikipedia.org/wiki/IP_over_Avian_Carriers">avian carriers</a>. This removes <em>much</em> of the complexity of the 1.1WD.</p></li><li><p><strong>HTTP</strong>:</p><p>Nevertheless, if you want to use http, an appendix recommends how to
use JSON-RPC over HTTP: simply tunnel JSON-RPC through HTTP.</p><p>HTTP then doesn't need to know anything about JSON-RPC. And I don't
think that it's reasonable to i.e. convert JSON-RPC-errors to HTTP
errors.</p><p>HTTP GET is discouraged. And if you <em>really</em> want to use HTTP GET,
you should use a small wrapper, which converts HTTP GET calls to
json-rpc.</p><p>The "User-Agent" header is not explicitly required anymore, because
it does not provide any information for JSON-RPC.</p></li><li><p><strong>Named and Positional Parameters, Null parameters</strong>:</p><p>1.1WD allows mixed named and positional parameters, which requires much
more complicated servers and clients and adds some ambiguity. It also
says that "Null ... as the value of any parameter ... MUST be taken to mean
that the parameter is not being supplied for the call".</p><p>This specification allows either named or positional parameters, and it also
optionally allows but <em>discourages</em> the use of both in one call. It also
uses a separate objects for named and positional parameters.</p><p>"Null" is no special value, and a parameter-value of "Null" simply means
that the parameter should be "Null".</p></li><li><p><strong>Member Sequence</strong>:</p><p>1.1WD: the members of the JSON-RPC-object SHOULD be in a specific order,
and allows the server to refuse requests which do not stick to this order.</p><p>This is removed in this specification.</p></li><li><p><strong>Procedure Call Parity, Call Approximation</strong>:</p><p>Removed in this specification. A Service must be called <em>exactly</em> as
specified.</p><p>(Things like "Call Approximation" and other magic are considered harmful,
and may result in unexpected results. It's <em>much</em> better to require the
client to say <em>exactly</em> what he wants than having a server which
<em>guesses</em>.)</p></li><li><p><strong>Error Object</strong>:</p><p>The "name" member was removed, because it does not provide any
information. The error-code is no longer limited to 100-999, so
that i.e. the xmlrpc-error-codes can be used.</p></li><li><p><strong>Services, Service Description, Parameter and Return Type Strings</strong>:</p><p>service.description is now optional. Additional optional system-services
were added (mainly those from xmlrpc).</p><p>The "Parameter and Return Type Strings" now SHOULD be used (instead
of "MAY"), and it is not allowed to supply the Null value for all
parameters.</p></li><li><p><strong>Service, Procedure and Parameter Names</strong>:</p><p>Added underscore ("_") to, and removed hypen ("-") from the recommended
characters. Additionally, added period (".") for methods, and everything
is defined as case-sensitive.</p></li><li><p><strong>Object Extensions</strong>:</p><p>This was removed in this specification.</p></li><li><p><strong>Multicall</strong>:</p><p>This was added in this specification.</p></li></ul></div></div><div><h1><a name="requirements">3&nbsp;&nbsp;&nbsp;Requirements</a></h1><p>see <a href="http://json-rpc.org/wd/JSON-RPC-1-1-WD-20060807.html#Requirements">1.1WD, Requirements</a>.</p></div><div><h1><a name="terminology">4&nbsp;&nbsp;&nbsp;Terminology</a></h1><p>see <a href="http://json-rpc.org/wd/JSON-RPC-1-1-WD-20060807.html#Terms">1.1WD, Terminology</a>.</p></div><div><h1><a name="type-system">5&nbsp;&nbsp;&nbsp;Type system</a></h1><div><div>see <a href="http://json-rpc.org/wd/JSON-RPC-1-1-WD-20060807.html#TypeSystem">1.1WD, Type System</a>.</div><div>(or <a href="http://www.json.org">http://www.json.org</a>)</div></div></div><div><h1><a name="procedure-call-request">6&nbsp;&nbsp;&nbsp;Procedure Call (Request)</a></h1><p>A remote procedure call is made by sending a request to a remote service.
The request is expressed as a JSON Object, with the following members:</p><dl><dt><strong>version</strong></dt><dd>REQUIRED. A String specifying the version of the JSON-RPC protocol
to which the client conforms. An implementation conforming to this
specification MUST use the exact String value of "1.1" for this member.</dd><dt><strong>method</strong></dt><dd><p>REQUIRED. A String containing the name of the procedure to be invoked.</p><p>Procedure names that begin with the word "system" followed by a period
character (U+002E or ASCII 46) are reserved. In other words, a procedure
named "system.foobar" is considered to have reserved semantics.</p></dd><dt><strong>params</strong></dt><dd>OPTIONAL. An Array that holds the positional parameter values for the
invocation of the procedure.</dd><dt><strong>kwparams</strong></dt><dd>OPTIONAL. An Object that holds the named parameter values for the
invocation of the procedure.</dd><dt><strong>id</strong></dt><dd>OPTIOINAL. A request identifier that can be of any JSON type.
This member can be used to correlate a response with its request.
If this member is present then the server MUST repeat it verbatim
on the response.</dd></dl><p>Unless a call is for notification purposes only, bearing one-way semantics,
it MUST be replied to with a response.</p><div><h2><a name="named-and-positional-parameters">6.1&nbsp;&nbsp;&nbsp;Named and Positional Parameters</a></h2><p>Parameters for a procedure call can be identified by their name or position.
The name and position of a parameter is defined by the formal argument list
of the target procedure.</p><p>A client can specify parameters:</p><ul><li><p>by-position: "params" contains the parameters in the right order,
"kwparams" is omitted. This is like JSON-RPC 1.0.</p><p>Every JSON-RPC implementation MUST support this.</p></li><li><p>by-name: "kwparams" contains the parameter-names and its values,
"params" is omitted.
The names MUST match exactly (including in case) the names defined by the
formal arguments.</p><p>Every JSON-RPC implementation SHOULD support this.</p></li><li><p>mixed: The usage of both "params" and "kwparams" in one call is
<em>discouraged</em>. Nevertheless, a JSON-RPC implementation MAY support this.
Then, if a parameter is both given as named and positional parameter,
an error MUST be returned.</p><p>If the implementation does not support both in one call, it MUST
return an error if called with both.</p></li></ul><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>specify which errors should be returned</td></tr></tbody></table><div><h3><a name="choosing-between-named-and-positional-parameters">6.1.1&nbsp;&nbsp;&nbsp;Choosing between Named and Positional Parameters</a></h3><p>Calls that identify the parameters by-name are RECOMMENDED over positional
parameters in most cases, for the following reasons:</p><ol><li>The call appears more readable and self-contained on the wire, which can
aid in logging and diagnosis without having to constantly consult the
procudure definitions.</li><li>The client gains independence from any change in the order of the formal
argument list.</li><li>If the formal argument list is large and mostly optional, the client can
send only those parameters that it needs to.</li></ol><p>In small or simple applications however, positional parameters may
sometimes be more appropriate.</p></div></div><div><h2><a name="call-examples">6.2&nbsp;&nbsp;&nbsp;Call examples</a></h2><pre><br>--&gt; data sent to service<br>&lt;-- data coming from service<br></pre><p>Suppose a remote procedure called sum that defines three formal arguments
called a, b and c. Suppose further that a comes first in the argument list,
b second and c third, as in "sum(a,b,c)". The following examples show how
this procedure can be called.</p><div><h3><a name="procedure-call-with-named-parameters">6.2.1&nbsp;&nbsp;&nbsp;Procedure Call with Named Parameters</a></h3><pre><br>--&gt; { "version" : "1.1", "method" : "sum", "kwparams" : { "a" : 12, "b" : 34, "c" : 56 } }<br><br></pre><p>Since parameters are identified by their name, the order is insignificant.
The same MAY be expressed with parameters appearing in a different order
than which is defined by the formal argument list:</p><pre><br>--&gt; {<br>    "version"  : "1.1",<br>    "method"   : "sum",<br>    "kwparams" : { "b" : 34, "c" : 56, "a" : 12 }<br>    }<br><br></pre></div><div><h3><a name="procedure-call-with-positional-parameters">6.2.2&nbsp;&nbsp;&nbsp;Procedure Call with Positional Parameters</a></h3><p>If a client chooses to send parameters by their position, then it must use
the params member of the procedure call object:</p><pre><br>--&gt; {"version" : "1.1", "method"  : "sum", "params"  : [ 12, 34, 56 ] }<br><br></pre></div><div><h3><a name="procedure-call-with-mixed-parameters">6.2.3&nbsp;&nbsp;&nbsp;Procedure Call With Mixed Parameters</a></h3><p>Although this is <em>discouraged</em>, here is an example:</p><pre><br>--&gt; { "version": "1.1", "method": "sum", "params": [12,34], "kwparams":{"c": 56} }<br><br></pre></div></div></div><div><h1><a name="procedure-return-response">7&nbsp;&nbsp;&nbsp;Procedure Return (Response)</a></h1><p>When a remote procedure call is made, the service MUST reply with a response
whether the invocation was successful or not.</p><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>how about notifications ?</td></tr></tbody></table><p>The response MUST be a JSON Object that carries the following properties or
members:</p><dl><dt><strong>version</strong></dt><dd><p>REQUIRED. A String specifying the version of the JSON-RPC protocol
to which the client conforms. An implementation conforming to this
specification MUST use the exact String value of "1.1" for this member.</p><p>The absence of this member can effectively be taken to mean that the
remote server implements version 1.0 of the JSON-RPC protocol.</p></dd><dt><strong>result</strong></dt><dd>REQUIRED on success. The value that was returned by the procedure upon a
successful invocation. Its contents is entirely defined by the procedure.
This member MUST be entirely omitted in if there was an error invoking
the procedure.</dd><dt><strong>error</strong></dt><dd>REQUIRED on error. An Object containing error information about the fault
that occured before, during or after the call.
This member MUST be entirely omitted if there was no error.</dd><dt><strong>id</strong></dt><dd>OPTIONAL. If the id member was present on the request, then the
server MUST repeat it verbatim on the response.
This member can be used to correlate a response with its request.</dd></dl><p>Exactly one of "result" or "error" MUST be specified.
It's not allowed to specify both or none.</p><div><h2><a name="error-object">7.1&nbsp;&nbsp;&nbsp;Error Object</a></h2><p>When a remote procedure call fails, the Procedure Return object MUST contain
the error member whose value is a JSON Object with the following members:</p><dl><dt>code</dt><dd>REQUIRED. A Number value that indicates the actual error that occurred.
This MUST be an integer.</dd><dt>message</dt><dd>REQUIRED. A String value that provides a short description of the error.
The message SHOULD be limited to a concise single sentence.</dd><dt>error</dt><dd>OPTIONAL. A JSON Null, Number, String or Object value that carries custom
and application-specific error information. Error objects MAY be nested
using this property.</dd></dl><p>The following table lists the error codes defined by this specification:</p><table border="1"><colgroup><col width="8%"><col width="27%"><col width="65%"></colgroup><thead valign="bottom"><tr><th>code</th><th>message</th><th>Meaning</th></tr></thead><tbody valign="top"><tr><td></td><td>Server error</td><td>General error on the server, prior to procedure
invocation.</td></tr><tr><td></td><td>Parse error</td><td>Invalid JSON / An error occured on the server
while parsing the JSON text.</td></tr><tr><td></td><td>Bad call</td><td>The procedure call is not valid.</td></tr><tr><td></td><td>Service error</td><td>The call is valid, but a general error occurred
during the procedure invocation.</td></tr><tr><td></td><td>Procedure not found</td><td>The call is valid but the procedure identified
by the call could not be located on the service.</td></tr></tbody></table><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>specify error-codes; maybe use the same error-codes as XML-RPC?</td></tr></tbody></table></div><div><h2><a name="response-examples">7.2&nbsp;&nbsp;&nbsp;Response Examples</a></h2><p>Suppose the example from <a href="#call-examples">Call Examples</a>.
The response to all these calls on success would be:</p><pre><br>&lt;-- { "version" : "1.1", "result" : 102 }<br><br></pre><p>And here's a possible response on error:</p><pre><br>&lt;-- {<br>    "version" : "1.1",<br>    "error" : {<br>         "code" : 123,<br>         "message" : "An error occurred parsing the request object.",<br>         "error" : {<br>             "message" : "Bad array",<br>             "at" : 42,<br>             "text" : "{\"id\":1,\"method\":\"sum\",\"params\":[1,2,3,4,5}"<br><br>             }<br>         }<br>    }<br></pre><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>use the defined errors/error-codes as soon as they are defined.</td></tr></tbody></table></div></div><div><h1><a name="system-services">8&nbsp;&nbsp;&nbsp;System Services</a></h1><p>Procedure names that begin with "system." are reserved (see
<a href="#procedure-call-request">Procedure Call (Request)</a>).</p><p>A server MAY implement the following system-services. It SHOULD at least
implement "system.listMethods" and "system.methodHelp".</p><dl><dt>system.listMethods()</dt><dd>This method returns a list of strings, one for each (non-system) method
supported by the RPC server.</dd><dt>system.methodSignature(name)</dt><dd><p>This method takes one parameter, the name of a method implemented by
the XML-RPC server. It returns an array of possible signatures for this
method. A signature is an array of types. The first of these types is
the return type of the method, the rest are parameters.</p><p>Because multiple signatures (i.e. overloading) is permitted, this method
returns a list of signatures rather than a singleton.</p><p>Signatures themselves are restricted to the top level parameters expected
by a method. For instance if a method expects one Array of Objects as a
parameter, and it returns a String, its signature is simply "str,
arr". If it expects three Numbers and returns a String, its signature
is "str, num, num, num".</p><p>If no signature is defined for the method, Null is returned.</p></dd><dt>system.methodHelp(name)</dt><dd><p>This method takes one parameter, the name of a method implemented by
the RPC server. It returns a documentation string describing the use
of that method. If no such string is available, an empty string is
returned.</p><p>The documentation string may contain markup.</p></dd><dt>system.echo(data)</dt><dd>This method takes one parameter of any type, and returns it as "result".
It serves as a simple test-function.</dd><dt>system.describe()</dt><dd>This method is the same as in <a href="http://json-rpc.org/wd/JSON-RPC-1-1-WD-20060807.html#Services">1.1WD, Services</a>. Although it is a
large and complex method, it is listed here for compatibility
with 1.1WD.</dd><dt>system.multicall()</dt><dd>see <a href="#multicall">Multicall</a></dd></dl><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>Maybe it would be reasonable to define a simplified version
of "describe".</td></tr><tr><th>TODO:</th><td>describe/define these services in detail.</td></tr></tbody></table><p>The 3 services "listMethods", "methodSignature" and "methodHelp" are nearly
the same as in XML-RPC (see <a href="http://xml-rpc.org">http://xml-rpc.org</a> or
<a href="http://docs.python.org/lib/serverproxy-objects.html">http://docs.python.org/lib/serverproxy-objects.html</a>).</p><div><h2><a name="parameter-and-return-type-strings">8.1&nbsp;&nbsp;&nbsp;Parameter and Return Type Strings</a></h2><p>The type member of the Procedure Parameter Description SHOULD be one of
the following String values:</p><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>SHOULD or MUST?</td></tr></tbody></table><dl><dt>"bit"</dt><dd>Boolean</dd><dt>"num"</dt><dd>Number</dd><dt>"str"</dt><dd>String</dd><dt>"arr"</dt><dd>Array</dd><dt>"obj"</dt><dd>Object</dd><dt>"any"</dt><dd>Boolean, Number, String, Array or Object</dd><dt>"nil"</dt><dd>None (valid only for procedure return type)</dd></dl><p>If another String value is found then it MUST be treated the same as "any".</p><p>The "nil" string MUST NOT be used to describe the type of a procedure's
formal argument. Rather, it is strictly reserved to denote the return
type of a procedure that is not expected to produce a result. In other
words, the result member of the Procedure Return object resulting from
a call to such procedure is not interesting because it will always be
the Null value.</p></div></div><div><h1><a name="service-procedure-and-parameter-names">9&nbsp;&nbsp;&nbsp;Service, Procedure and Parameter Names</a></h1><p>In JSON-RPC, service, procedure, parameters identifiable by name. The
names of all these artifacts SHOULD only include:</p><ul><li>uppercase alphabets A to Z (U+0041 to U+005A, ASCII 65 to 90)</li><li>lowercase alphabets a to z (U+0061 to U+007A, ASCII 97 to 122)</li><li>decimal digits 0 to 9 (U+0030 to U+0039, ASCII 48 to 57)</li><li>underscore "_" (U+005F, ASCII 95)</li><li>period "." (U+002E, ASCII 46) for method calls (only)</li></ul><p>All other characters in a name, although not technically excluded here,
could severely limit the reach of the service and its procedures given
certain environments, scenarios and especially programming languages.</p><p>All names etc. are case-sensitive. Conforming implementations therefore
MUST treat <em>all</em> names as being case-sensitive such the names "bar" and
"BAR" would be seen as two distinct entities.</p></div><div><h1><a name="extensions">10&nbsp;&nbsp;&nbsp;Extensions</a></h1><p>All extensions are OPTIONAL.</p><div><h2><a name="multicall">10.1&nbsp;&nbsp;&nbsp;Multicall</a></h2><p>There is a special method called "system.multicall", like in XMLRPC.
This method takes the single calls as positional parameters (in "params").
The result is a list of the single-call results.</p><p>Call Example:</p><pre><br>--&gt; { "version":"1.1", "method":"system.multicall", "params":<br>      [{ "version":"1.1", "method":"sum", "params":{"a":1,"b":1} },<br>       { "version":"1.1", "method":"sum", "params":{"a":2,"b":2} },<br>       { "version":"1.1", "method":"sum", "params":{"a":3,"b":3} }]<br>    }<br><br></pre><p>Return Example on success:</p><pre><br>&lt;-- { "version":"1.1", "result":<br>     [{ "version":"1.1", "result":2 },<br>      { "version":"1.1", "result":4 },<br>      { "version":"1.1", "result":6 }]<br>    }<br><br></pre><p>Return Example with some errors:</p><pre><br>&lt;-- {"version":"1.1", "result":<br>    [{"version":"1.1", "error":{"code":..., "message":"..."}},<br>     {"version":"1.1", "result":4},<br>     {"version":"1.1", "error":{"code":..., "message":"..."}}]<br>   }<br><br></pre><p>Return Example if the multicall itself fails:</p><pre><br>&lt;-- {"version":"1.1", "error":{"code":..., "message":"Parse error"}}<br><br></pre></div></div><div><h1><a name="appendix-a-transports">11&nbsp;&nbsp;&nbsp;APPENDIX A: Transports</a></h1><p>JSON-RPC does not depend on any specific transport (see also <a href="#differences-from-1-1wd">Differences
From 1.1WD</a>). Any transport should be possible.</p><p>Nevertheless, here are some recommendations how to use JSON-RPC over
some commonly-used transports.</p><div><h2><a name="unix-domain-sockets">11.1&nbsp;&nbsp;&nbsp;Unix Domain Sockets</a></h2><p>This is straight-forward: open a socket and send/receive the data.</p></div><div><h2><a name="tcp-ip-sockets">11.2&nbsp;&nbsp;&nbsp;TCP/IP Sockets</a></h2><p>This is straight-forward: open a socket and send/receive the data.</p></div><div><h2><a name="http">11.3&nbsp;&nbsp;&nbsp;HTTP</a></h2><p>If you want to use HTTP, simply tunnel JSON-RPC through HTTP with
Content-Type "application/json".</p><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>should "application/json" be changed to "application/jsonrpc"?</td></tr></tbody></table><div><h3><a name="http-post-procedure-call">11.3.1&nbsp;&nbsp;&nbsp;HTTP POST Procedure Call</a></h3><p>The HTTP request message MUST specify the following headers:</p><ul><li>Content-Type MUST be specified and SHOULD read "application/json".</li><li>Content-Length MUST be specified and correct according to the
HTTP specification.</li><li>Accept MUST be specified and SHOULD read "application/json".</li></ul><p>The Request itself is carried in the body of the HTTP message.</p><p><strong>Example</strong>:</p><pre><br>POST /myservice HTTP/1.1<br>User-Agent: Wget/1.6<br>Host: www.example.com<br>Content-Type: application/json<br>Content-Length: ...<br>Accept: application/json<br><br>{<br>     "version"  : "1.1",<br>     "method"   : "sum",<br>     "kwparams" : { "b" : 34, "c" : 56, "a" : 12 }<br>}<br><br></pre></div><div><h3><a name="http-get-procedure-call">11.3.2&nbsp;&nbsp;&nbsp;HTTP GET Procedure Call</a></h3><p>The use of JSON-RPC directly over HTTP GET is NOT RECOMMENDED, since this
would mean to encode the JSON-string of the Request in the URL, which would be
ugly, cause several problems, and is not what most people would expect when
thinking of HTTP GET.</p><p>But if you need to call JSON-RPC-services via HTTP GET,
use a wrapper which accepts a HTTP GET request, decides if a
JSON-RPC-service should be called and then converts it to
JSON-RPC-request-syntax. It could additionally mangle the
JSON-RPC-response before returning the result (via HTTP).</p><p>But note that (according to <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1">HTTP Section 9.1, Safe and Idempotent Methods</a>)
only procedures that are considered safe and idempotent MAY be invoked using
HTTP GET.</p></div><div><h3><a name="http-procedure-return">11.3.3&nbsp;&nbsp;&nbsp;HTTP Procedure Return</a></h3><p>The HTTP return message MUST specify the following headers:</p><ul><li>Content-Type MUST be specified and SHOULD read "application/json".</li><li>Content-Length MUST be specified and correct according to the
HTTP specification.</li></ul><p>The status code MUST be 200, except for HTTP errors.</p><p>The Response (both on success and error) is carried in the HTTP body.</p><p><strong>Example on Success</strong>:</p><pre><br>HTTP/1.1 200 OK<br>Connection: close<br>Content-Length: ...<br>Content-Type: application/json<br>Date: Sat, 08 Jul 2006 12:04:08 GMT<br><br>{<br>    "version" : "1.1",<br>    "result"  : 102<br>}<br></pre><p><strong>Example on Error</strong>:</p><pre><br>HTTP/1.1 200 OK<br>Connection: close<br>Content-Length: ...<br>Content-Type: application/json<br>Date: Sat, 08 Jul 2006 12:04:08 GMT<br><br>{<br>    "version" : "1.1",<br>    "error" : {<br>        "code" : 123,<br>        "message" : "An error occurred parsing the request object.",<br>        "error" : {<br>            "message" : "Bad array",<br>            "at" : 42,<br>            "text" : "{\"id\":1,\"method\":\"sum\",\"params\":[1,2,3,4,5}"}<br>        }<br>    }<br>}<br><br></pre><table><col><col><tbody valign="top"><tr><th>TODO:</th><td>add correct Content-Length</td></tr></tbody></table></div></div></div></div><div><hr><a href="jsonrpc_simple.txt"></a>
</div><wbr>